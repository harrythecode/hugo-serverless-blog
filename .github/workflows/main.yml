name: development

on:
  push:
    branches: [ development ]

jobs:
  deploy:
    name: Sync S3 bucket with serverless blog
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python: [3.6]
        
    steps:
    # To access git repo
    - name: Checkout
      uses: actions/checkout@v2
      with:
          submodules: true  # Fetch Hugo themes
    - name: Setup Hugo
      uses: peaceiris/actions-hugo@v2
      with:
        hugo-version: '0.68.3'
    - name: Deploy hugo
      run: hugo -t hugo-notepadium
    - name: Setup Python
      uses: actions/setup-python@v1
      with:
        python-version: ${{ matrix.python }}
    - name: Install pillow via pip
      run: pip install Pillow==7.0.0
    - name: Install pyyaml via pip
      run: pip install pyyaml==5.3.1
    - name: Make deploy
      run: make deploy
